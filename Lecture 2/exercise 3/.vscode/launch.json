{
  "version": "0.2.0",
  "configurations": [

    // debug with simulator
    {
      "name": "Build and debug (simulator)",
      "type": "cortex-debug",
      "request": "attach",
      "cwd": "${workspaceFolder}",
      "executable": "build/${config:mdx07-templates.appName}.elf",
      "servertype": "external",
      "gdbPath": "${config:mdx07-templates.riscvToolchainPath}riscv32-unknown-elf-gdb",
      "gdbTarget": "localhost:1234",
      "preLaunchTask": "Build MD307 project",

      // Let you see what cortex-debug is doing
      // "showDevDebugOutput": "raw",

      // Extra commands after connect
      "overrideAttachCommands": [
        "monitor reset halt",
        "load",
        "break main",
        "continue"
      ],

      // This manually scripts the entire restart process
      "overrideRestartCommands": [
        "monitor reset halt",
        "load",
        "break main",
        "continue"
      ],
      
      "breakAfterReset": true,

      // Peripheral/SVD viewer
      "definitionPath": "${workspaceFolder}/device/ch32v30x.svd"

    },
    // Debug with hardware
    {
      "name": "Build and debug (hardware)",
      "type": "cortex-debug",
      "request": "launch",
      "cwd": "${workspaceFolder}",
      "executable": "build/${config:mdx07-templates.appName}.elf",

      // OpenOCD automatic launch
      "servertype": "openocd",
      "serverpath": "${config:mdx07-templates.openocdPath}",
      "configFiles": [
        "${workspaceFolder}/device/wch-riscv.cfg"
      ],
      // optional: add extra args to OpenOCD if needed
      //"serverArgs": [ "-d" ], // enable OpenOCD debug output

      // gdb
      "gdbPath": "${config:mdx07-templates.riscvToolchainPath}riscv32-unknown-elf-gdb",
      "runToEntryPoint": "main",
      "preLaunchTask": "Build MD307 project",

      // extra gdb setup
      "overrideLaunchCommands": [
        "monitor reset halt",
        "break main",
        "load"
      ],
      "overrideRestartCommands": [
        "monitor reset halt",
        "break main",
        "load"
      ],
      "breakAfterReset": true,

      // debugger output
      "showDevDebugOutput": "raw",

      // svd / peripheral viewer ----------
      "definitionPath": "${workspaceFolder}/device/ch32v30x.svd"
    }

  ]
}